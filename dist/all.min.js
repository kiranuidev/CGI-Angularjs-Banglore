angular.module("components",[]),angular.module("components").directive("cgiTitle",[function(){return{template:"CGI",restrict:"AEC"}}]),angular.module("components").directive("cgiHeader",[function(){return{templateUrl:"app/templates/header.html",restrict:"AEC"}}]),angular.module("components").directive("cgiNumbersOnly",[function(){return{restrict:"A",link:function(t,e,n){e.bind("keypress",function(t){var e=(t.keyCode,n.inputlength,this.value.length,/^\d+$/),o=new RegExp(e);o.test(t.key)||t.preventDefault()})}}}]),angular.module("login",[]),angular.module("login").controller("loginCtrl",["$scope","loginSvc","$rootScope",function(t,e,n){t.loginUser={},t.login=function(){var o=e.loginUser(t.loginUser);o&&n.$broadcast("USER_LOGGEDIN",{data:"congrats"})},t.name="kiran",t.$watch("name",function(t,e){console.log(t),console.log(e)}),setTimeout(function(){t.name="PVS",t.$apply()},5e3)}]),angular.module("login").service("loginSvc",["$http",function(t){var e={authenticated:!1,firstname:"",lastname:""};this.loginUser=function(n){return t.get("app/data/user.json").then(function(t){console.log(t),angular.forEach(t.data.users,function(t){t.username===n.username&&t.password===n.password&&(e.authenticated=!0,e.firstname=t.firstname,e.lastname=t.lastname)})}).catch(function(t){console.log(t)}),!0},this.logout=function(){e.authenticated=!1,e.firstname="",e.lastname=""},this.isAuthenticated=function(){return e}}]),angular.module("products",[]),angular.module("products").controller("cartCtrl",["$scope","productSvc",function(t,e){t.cartProducts=e.getSelectedProducts()}]),angular.module("products").controller("productCtrl",["$scope","productSvc","$rootScope",function(t,e,n){t.addProduct=function(t){e.addProductForCheckout(t),n.$broadcast("PRODUCT_ADDED_CART",{data:t})},e.getProductsFromPromise().then(function(e){console.log(e),t.products=e}).catch(function(t){console.log(t)}),e.getWallMartProducts().then(function(t){console.log(t)}).catch(function(t){console.log(t)}),console.log("I am in the regularmode")}]),angular.module("products").service("productSvc",["$http","$q",function(t,e){this.products=function(){t.get("app/data/products.json").then(function(t){console.log(t)}).catch(function(t){console.log(t)})};var n=[];this.getProductsFromPromise=function(){var n=e.defer();return t.get("app/data/products.json").then(function(t){n.resolve(t.data.products)}).catch(function(t){console.log(t)}),n.promise},this.addProductForCheckout=function(t){n.push(t)},this.getSelectedProducts=function(){return n},this.getWallMartProducts=function(){var n="http://api.walmartlabs.com/v1/search?query=ipod&format=json&apiKey=yjrruzc9fgbxvs28qw2rjczv",o=e.defer();return t.get(n).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)}),o.promise}}]),angular.module("register",[]),angular.module("register").controller("registerCtrl",["$scope",function(t){function e(t){var e=t.date,n=t.mode;return"day"===n&&(0===e.getDay()||6===e.getDay())}function n(e){var n=e.date,o=e.mode;if("day"===o)for(var a=new Date(n).setHours(0,0,0,0),r=0;r<t.events.length;r++){var c=new Date(t.events[r].date).setHours(0,0,0,0);if(a===c)return t.events[r].status}return""}t.user={},t.countries=[{name:"India",code:"IN",continent:"Asia"},{name:"Canada",code:"CA",continent:"NA"},{name:"United States",code:"US",continent:"NA"}],t.today=function(){t.dt=new Date},t.today(),t.clear=function(){t.dt=null},t.inlineOptions={customClass:n,minDate:new Date,showWeeks:!0},t.dateOptions={dateDisabled:e,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},t.toggleMin=function(){t.inlineOptions.minDate=t.inlineOptions.minDate?null:new Date,t.dateOptions.minDate=t.inlineOptions.minDate},t.toggleMin(),t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.setDate=function(e,n,o){t.dt=new Date(e,n,o)},t.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],t.format=t.formats[0],t.altInputFormats=["M!/d!/yyyy"],t.popup1={opened:!1},t.popup2={opened:!1};var o=new Date;o.setDate(o.getDate()+1);var a=new Date;a.setDate(o.getDate()+1),t.events=[{date:o,status:"full"},{date:a,status:"partially"}]}]),angular.module("flipzon",["register","login","products","components","ui.bootstrap"]),angular.module("flipzon").controller("mainCtrl",["$scope","$rootScope","loginSvc",function(t,e,n){t.headerUrl="app/templates/header.html",t.showLogin=!0,t.cartCount=0;var o="app/templates/";t.loadContent=function(e){if("register"==e)t.contentUrl=o+e+".html";else{var a=n.isAuthenticated();a.authenticated?(t.showLogin=!1,t.userdetails=a.firstname+","+a.lastname,t.contentUrl=o+e+".html"):(t.showLogin=!0,t.contentUrl=o+"login.html")}},t.logout=function(){n.logout(),t.loadContent("login")},e.$on("USER_LOGGEDIN",function(e,n){console.log(n),t.loadContent("products")}),e.$on("PRODUCT_ADDED_CART",function(e,n){t.cartCount++})}]);